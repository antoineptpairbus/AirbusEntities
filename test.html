<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Carte Mapbox</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css' rel='stylesheet' />
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
            height: 100vh;
        }
    </style>
</head>

<body>
    <div id='map'></div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiYW50b2luZXB0cCIsImEiOiJjbTRpbTI3MGYwM3BuMmlwenJ4Z3JlcXR5In0.fI7XZoUOWadcaY3Z9DzjUg';
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: [-73.9857, 40.7484],
            zoom: 10
        });

        map.on('load', () => {
            map.addSource('nyPoints', {
                type: 'geojson',
                data: {
                    "type": "FeatureCollection",
                    "features": [{
                        "type": "Feature",
                        "properties": {
                            "location": "Dekalb Ave & Flatbush Ave",
                            "boro_name": "Brooklyn",
                            "street": "DEKALB AVENUE",
                            "neighborhood": "Fort Greene"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.98109555019138, 40.68985092532933]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Grahan Ave & Metropolitan Ave",
                            "boro_name": "Brooklyn",
                            "street": "GRAHAM AVENUE",
                            "neighborhood": "East Williamsburg"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.94451215478905, 40.71471230203185]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Kings Hwy & E. 15th St",
                            "boro_name": "Brooklyn",
                            "street": "KINGS HIGHWAY",
                            "neighborhood": "Madison"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.95815283488757, 40.60888029893385]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "4th Ave & 36th St",
                            "boro_name": "Brooklyn",
                            "street": "36 STREET",
                            "neighborhood": "Sunset Park (West)"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-74.00418544571221, 40.654290631076414]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Surf Ave & Stillwell Ave",
                            "boro_name": "Brooklyn",
                            "street": "SURF AVENUE",
                            "neighborhood": "Coney Island-Sea Gate"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.98049489893239, 40.57567391264483]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "E. Kingbridge Rd & Briggs Ave",
                            "boro_name": "Bronx",
                            "street": "EAST KINGSBRIDGE ROAD",
                            "neighborhood": "University Heights (North)-Fordham"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.89429103041087, 40.86297019613109]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Grand Concourse & E.Tremont Ave",
                            "boro_name": "Bronx",
                            "street": "GRAND CONCOURSE",
                            "neighborhood": "Mount Hope"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.90601188067646, 40.849842862422626]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "E. 17th St & Broadway",
                            "boro_name": "Manhattan",
                            "street": "EAST 17 STREET",
                            "neighborhood": "Midtown South-Flatiron-Union Square"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.989978555, 40.73701791033392]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "W. 23rd St & 6th Ave",
                            "boro_name": "Manhattan",
                            "street": "WEST 23 STREET",
                            "neighborhood": "Midtown South-Flatiron-Union Square"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.99256188367652, 40.742698515904735]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "W. 23rd St & 8th Ave",
                            "boro_name": "Manhattan",
                            "street": "WEST 23 STREET",
                            "neighborhood": "Chelsea-Hudson Yards"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.99808717183724, 40.74522816999436]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Rutgers St & East Broadway",
                            "boro_name": "Manhattan",
                            "street": "RUTGERS STREET",
                            "neighborhood": "Chinatown-Two Bridges"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.99009279896514, 40.71379174465101]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Jackson Ave & 50th Ave",
                            "boro_name": "Queens",
                            "street": "JACKSON AVENUE",
                            "neighborhood": "Long Island City-Hunters Point"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.95218731600916, 40.742658633047895]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "31st St & 30th Ave",
                            "boro_name": "Queens",
                            "street": "31 STREET",
                            "neighborhood": "Astoria (Central)"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.92150005764297, 40.766572706970074]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Lefferts Blvd & Liberty Ave",
                            "boro_name": "Queens",
                            "street": "LEFFERTS BOULEVARD",
                            "neighborhood": "South Ozone Park"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.82394086263547, 40.68597530941907]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "71st Ave & Austin St",
                            "boro_name": "Queens",
                            "street": "71 AVENUE",
                            "neighborhood": "Forest Hills"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-73.84484203907775, 40.719916586642114]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Father Capodanno Blvd & Sand Lane",
                            "boro_name": "Staten Island",
                            "street": "FR CAPODANNO BOULEVARD",
                            "neighborhood": "Grasmere-Arrochar-South Beach-Dongan Hills"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-74.0661975758172, 40.5905069173068]
                        }
                    }, {
                        "type": "Feature",
                        "properties": {
                            "location": "Richmond Ave & Wainwright Ave",
                            "boro_name": "Staten Island",
                            "street": "ELTINGVILLE TRANSIT CENTER DRVWY",
                            "neighborhood": "Great Kills-Eltingville"
                        },
                        "geometry": {
                            "type": "Point",
                            "coordinates": [-74.17097248892372, 40.56015795513925]
                        }
                    }]
                }
            });

            map.addLayer({
                id: 'nyPointsLayer',
                type: 'circle',
                source: 'nyPoints',
                paint: {
                    'circle-radius': 6,
                    'circle-color': '#3887be'
                }
            });

            map.on('click', 'nyPointsLayer', (e) => {
                new mapboxgl.Popup()
                    .setLngLat(e.lngLat)
                    .setHTML(`<b>Arrondissement:</b> ${e.features[0].properties.boro_name}`)
                    .addTo(map);
            });

            map.on('mouseenter', 'nyPointsLayer', () => {
                map.getCanvas().style.cursor = 'pointer';
            });

            map.on('mouseleave', 'nyPointsLayer', () => {
                map.getCanvas().style.cursor = '';
            });
        });
    </script>
</body>

</html>